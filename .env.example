# Local development only
# Source of truth for deployed environments is Pulumi stack config.
# Do NOT use this file as deployment configuration.

# Photogrammetry Service - Optional local environment variables

# GCP Configuration
GCP_PROJECT=your-project-id
GCP_REGION=southamerica-east1

# Storage Buckets
UPLOADS_BUCKET=${GCP_PROJECT}-photogrammetry-uploads
OUTPUTS_BUCKET=${GCP_PROJECT}-photogrammetry-outputs

# Service Account (for signing URLs in Cloud Run)
SERVICE_ACCOUNT_EMAIL=photogrammetry-api@${GCP_PROJECT}.iam.gserviceaccount.com

# Worker Configuration
WORKER_IMAGE=${GCP_REGION}-docker.pkg.dev/${GCP_PROJECT}/photogrammetry/worker:latest
WORKER_SERVICE_ACCOUNT=photogrammetry-worker@${GCP_PROJECT}.iam.gserviceaccount.com

# CORS (comma-separated list of allowed origins, or * for all)
ALLOWED_ORIGINS=*

# Pub/Sub
PUBSUB_TOPIC=photogrammetry-status

# Batch runtime contract (injected by Pulumi in Cloud Run)
BATCH_ALLOWED_ZONES=southamerica-east1-a,southamerica-east1-b
BATCH_MAX_RUN_DURATION=43200s
BATCH_MAX_RETRY_COUNT=2
BATCH_PROVISIONING_MODEL=STANDARD
BATCH_MACHINE_TIERS=[{"maxImages":200,"machineType":"n2-standard-4","cpuMilli":4000,"memoryMib":16384},{"maxImages":500,"machineType":"n2-standard-8","cpuMilli":8000,"memoryMib":32768},{"maxImages":1000,"machineType":"n2-highmem-8","cpuMilli":8000,"memoryMib":65536},{"maxImages":2000,"machineType":"n2-highmem-16","cpuMilli":16000,"memoryMib":131072},{"maxImages":99999,"machineType":"n2-highmem-32","cpuMilli":32000,"memoryMib":262144}]
BATCH_MIN_BOOT_DISK_MB=51200
BATCH_DISK_SAFETY_MARGIN=1.15
BATCH_AVG_IMAGE_SIZE_MB=9
BATCH_WORKER_COMMAND=python3,/worker/main.py
BATCH_LOG_DESTINATION=CLOUD_LOGGING
